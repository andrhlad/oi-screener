<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crypto World Dashboard</title>
<style>
:root {
  --bg: #0f111a;
  --card-bg: #1e2134;
  --border: #2c2f4a;
  --text-main: #f1f1f1;
  --text-muted: #a0a3b8;
  --green: #00ff96;
  --red: #ff5c5c;
  --radius: 12px;
  --shadow: 0 6px 16px rgba(0,0,0,0.4);
  --accent: #7f5af0;
}

[data-theme="light"] {
  --bg: #f7f7f9;
  --card-bg: #ffffff;
  --border: #e4e6ef;
  --text-main: #222;
  --text-muted: #8f95a3;
  --green: #16a34a;
  --red: #dc2626;
  --shadow: 0 8px 20px rgba(15, 23, 42, 0.06);
  --accent: #4f46e5;
}

* {
  margin:0; padding:0; box-sizing:border-box;
  font-family: "Inter", system-ui, -apple-system, sans-serif;
  transition: all 0.3s;
}

body { background: var(--bg); color: var(--text-main); min-height:100vh; }

/* HEADER */
.header {
  background: var(--card-bg);
  border-bottom:1px solid var(--border);
  position: sticky; top:0; z-index:100;
}
.header-inner {
  max-width: 1440px; margin:0 auto; padding:12px 24px;
  display:flex; justify-content:space-between; align-items:center;
}
.logo { font-weight:800; font-size:20px; color:var(--accent); }
.header-right { display:flex; align-items:center; gap:12px; }
.clock-box {
  background: var(--bg); padding:6px 14px;
  border-radius:999px; font-size:13px; border:1px solid var(--border);
}
.theme-toggle {
  width:38px; height:38px; border-radius:50%; border:1px solid var(--border);
  background:var(--bg); cursor:pointer; font-size:18px;
}

/* DASHBOARD GRID */
.dashboard {
  display:grid; grid-template-columns:350px 1fr 320px;
  max-width:1440px; margin:20px auto; padding:0 20px 40px; gap:20px;
}
.column { display:flex; flex-direction:column; gap:20px; }

/* CARDS */
.card {
  background: var(--card-bg);
  border-radius: var(--radius);
  border:1px solid var(--border);
  box-shadow: var(--shadow);
  padding:16px; display:flex; flex-direction:column;
}
.card-title {
  font-size:13px; font-weight:700;
  margin-bottom:12px; text-transform:uppercase;
  color: var(--text-muted);
}

/* CHAT BOXES */
.chat-container { overflow-y:auto; display:flex; flex-direction:column; gap:6px; scroll-behavior:smooth; }
.small-box{height:180px;} .mid-box{height:300px;} .large-box{height:500px;}
.chat-item {
  padding:10px; border-radius:8px; font-size:12px;
  background: var(--bg); border-left:4px solid #555;
}
.is-up { border-left-color: var(--green); background: rgba(0,255,150,0.1); }
.is-down { border-left-color: var(--red); background: rgba(255,92,92,0.1); }

/* LEADERS TABLE */
.leaders-content { display:flex; flex-direction:column; gap:6px; font-size:12px; }
.leader-row {
  display:grid; grid-template-columns:1fr 1fr 1fr; padding:6px 8px;
  border-radius:6px; align-items:center;
  transition: background 0.2s;
}
.leader-row:hover { background: rgba(127,90,240,0.1); }
.leader-price { text-align:right; color: var(--text-muted); font-variant-numeric: tabular-nums; }
.leader-change.up { color: var(--green); text-align:right; font-weight:600; }
.leader-change.down { color: var(--red); text-align:right; font-weight:600; }

/* CONTACTS */
.contact-link { color: var(--accent); text-decoration:none; font-weight:600; margin-top:5px; font-size:13px; }

/* RESPONSIVE */
@media(max-width:1100px){.dashboard{grid-template-columns:1fr;}}
</style>
</head>
<body>

<header class="header">
  <div class="header-inner">
    <div class="logo">CRYPTO WORLD</div>
    <div class="header-right">
      <div class="clock-box">UTC: <span id="clock-utc">00:00:00</span></div>
      <button id="theme-btn" class="theme-toggle">üåì</button>
    </div>
  </div>
</header>

<main class="dashboard">
  <!-- LEFT COLUMN -->
  <div class="column">
    <div class="card">
      <div class="card-title">–ù–æ–≤–∏–Ω–∏ Live</div>
      <div id="news-container" class="chat-container small-box"></div>
    </div>
    <div class="card">
      <div class="card-title">–î–µ–ª—ñ—Å—Ç–∏–Ω–≥ / –õ—ñ—Å—Ç–∏–Ω–≥</div>
      <div id="listings-container" class="chat-container small-box"></div>
    </div>
    <div class="card">
      <div class="card-title">–ü–∞–º–ø & –î–∞–º–ø Live</div>
      <div id="pump-chat" class="chat-container large-box"></div>
    </div>
  </div>

  <!-- MIDDLE COLUMN -->
  <div class="column">
    <div class="card">
      <div class="card-title">Open Interest Chat</div>
      <div id="oi-chat" class="chat-container mid-box"></div>
    </div>
    <div class="card" style="flex-grow:1;">
      <div class="card-title">–õ—ñ–∫–≤—ñ–¥–∞—Ü—ñ—ó Live</div>
      <div id="liquidations-chat" class="chat-container" style="height:100%; min-height:400px;"></div>
    </div>
  </div>

  <!-- RIGHT COLUMN -->
  <div class="column">
    <div class="card">
      <div class="card-title">–¢–æ–ø –ì–µ–π–Ω–µ—Ä–∏ (24–≥)</div>
      <div id="gainers-list" class="leaders-content">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
    </div>
    <div class="card">
      <div class="card-title">–¢–æ–ø –õ—É–∑–µ—Ä–∏ (24–≥)</div>
      <div id="losers-list" class="leaders-content">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
    </div>
    <div class="card">
      <div class="card-title">–ü—Ä–æ –Ω–∞—Å</div>
      <div style="font-size:13px; color:var(--text-muted); line-height:1.5; margin-bottom:10px;">
        –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∫—Ä–∏–ø—Ç–æ-—Ä–∏–Ω–∫—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ. –î–∞–Ω—ñ –ø—Ä–æ –∞–Ω–æ–º–∞–ª—å–Ω—ñ –æ–±'—î–º–∏, –∑–º—ñ–Ω–∏ OI —Ç–∞ –ª—ñ–∫–≤—ñ–¥–∞—Ü—ñ—ó.
      </div>
      <div class="card-title" style="font-size:11px; margin-bottom:5px;">–ö–æ–Ω—Ç–∞–∫—Ç–∏</div>
      <a href="mailto:support@cryptoworld.com" class="contact-link">üìß support@cryptoworld.com</a>
      <a href="https://t.me/crypto_world_admin" target="_blank" class="contact-link">‚úàÔ∏è Telegram: @crypto_world_admin</a>
    </div>
  </div>
</main>

<script>
const API_URL="http://127.0.0.1:5000";

/* THEME */
const themeBtn=document.getElementById('theme-btn');
const toggleTheme=()=>{const isDark=document.documentElement.getAttribute('data-theme')==='dark'; document.documentElement.setAttribute('data-theme',isDark?'light':'dark'); localStorage.setItem('theme',isDark?'light':'dark'); themeBtn.textContent=isDark?'üåì':'‚òÄÔ∏è';};
if(localStorage.getItem('theme')==='dark'){document.documentElement.setAttribute('data-theme','dark'); themeBtn.textContent='‚òÄÔ∏è';}
themeBtn.addEventListener('click',toggleTheme);

/* UTC CLOCK */
function updateClock(){document.getElementById('clock-utc').textContent=new Date().toLocaleTimeString('uk-UA',{timeZone:'UTC'});}
setInterval(updateClock,1000); updateClock();

/* CHAT MESSAGE */
function processMessage(text,containerId='pump-chat',isHistory=false){
  const container=document.getElementById(containerId);
  if(!container)return;
  const div=document.createElement('div');
  const isDown=/üî¥|DUMP|üìâ/.test(text);
  div.className=`chat-item ${isDown?'is-down':'is-up'}`;
  div.innerHTML=text;
  if(isHistory) container.appendChild(div); else container.prepend(div);
  if(container.children.length>100) container.removeChild(isHistory?container.firstChild:container.lastChild);
  if(isHistory) container.scrollTop=container.scrollHeight;
}

/* LEADERS SSE */
function formatPrice(p){return p>1000?p.toFixed(2):p>1?p.toFixed(4):p.toFixed(6);}
function renderLeaders(containerId,items){const el=document.getElementById(containerId); if(!items)return; el.innerHTML=items.map(i=>`<div class="leader-row">
  <div>${i.symbol}</div>
  <div class="leader-price">$${formatPrice(i.price||0)}</div>
  <div class="leader-change ${i.change>=0?'up':'down'}">${i.change>=0?'+':''}${i.change}%</div>
</div>`).join('');}
function setupLeadersSSE(){const source=new EventSource(`${API_URL}/leaders_stream`);
source.onmessage=e=>{const data=JSON.parse(e.data); renderLeaders('gainers-list',data.gainers); renderLeaders('losers-list',data.losers);};
source.onerror=()=>{source.close(); setTimeout(setupLeadersSSE,5000);}}
window.onload=()=>{setupLeadersSSE();}
</script>

</body>
</html>
